
angular.module('starter.controllers',['ionic']).controller('AppCtrl',function($scope,$ionicModal,$timeout){$scope.loginData={};$ionicModal.fromTemplateUrl('templates/login.html',{scope:$scope}).then(function(modal){$scope.modal=modal;});$scope.closeLogin=function(){$scope.modal.hide();};$scope.login=function(){$scope.modal.show();};$scope.doLogin=function(){console.log('Doing login',$scope.loginData);$timeout(function(){$scope.closeLogin();},1000);};}).controller('MapCtrl',function($scope,$ionicLoading){$scope.mapCreated=function(map){$scope.map=map;};$scope.centerOnMe=function(){console.log("Centering");if(!$scope.map){return;}
$scope.loading=$ionicLoading.show({content:'Getting current location...',showBackdrop:false});navigator.geolocation.getCurrentPosition(function(pos){console.log('Got pos',pos);$scope.map.setCenter(new google.maps.LatLng(pos.coords.latitude,pos.coords.longitude));$scope.loading.hide();},function(error){alert('Unable to get location: '+error.message);});};});